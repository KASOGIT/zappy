<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Ring.qml Example File | Qt 3D 5.6</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    window.onload = function(){document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");};
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="main">
    <div class="main-rounded">
      <div class="navigationbar">
        <table><tr>
<td ><a href="../qtdoc/supported-platforms-and-configurations.html#qt-5-6">Qt 5.6</a></td><td ><a href="qt3d-index.html">Qt 3D</a></td><td ><a href="qt3d-planets-qml-example.html">Qt 3D: Planets QML Example</a></td><td >Ring.qml Example File</td></tr></table><table class="buildversion"><tr>
<td id="buildversion" width="100%" align="right">Qt 5.6.1 Reference Documentation</td>
        </tr></table>
      </div>
    </div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar"><div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Ring.qml Example File</h1>
<span class="subtitle">planets-qml/Ring.qml</span>
<!-- $$$planets-qml/Ring.qml-description -->
<div class="descr"> <a name="details"></a>
<pre class="qml">

  <span class="comment">/****************************************************************************
  **
  ** Copyright (C) 2015 The Qt Company Ltd.
  ** Contact: http://www.qt.io/licensing/
  **
  ** This file is part of the Qt3D module of the Qt Toolkit.
  **
  ** $QT_BEGIN_LICENSE:LGPL3$
  ** Commercial License Usage
  ** Licensees holding valid commercial Qt licenses may use this file in
  ** accordance with the commercial license agreement provided with the
  ** Software or, alternatively, in accordance with the terms contained in
  ** a written agreement between you and The Qt Company. For licensing terms
  ** and conditions see http://www.qt.io/terms-conditions. For further
  ** information use the contact form at http://www.qt.io/contact-us.
  **
  ** GNU Lesser General Public License Usage
  ** Alternatively, this file may be used under the terms of the GNU Lesser
  ** General Public License version 3 as published by the Free Software
  ** Foundation and appearing in the file LICENSE.LGPLv3 included in the
  ** packaging of this file. Please review the following information to
  ** ensure the GNU Lesser General Public License version 3 requirements
  ** will be met: https://www.gnu.org/licenses/lgpl.html.
  **
  ** GNU General Public License Usage
  ** Alternatively, this file may be used under the terms of the GNU
  ** General Public License version 2.0 or later as published by the Free
  ** Software Foundation and appearing in the file LICENSE.GPL included in
  ** the packaging of this file. Please review the following information to
  ** ensure the GNU General Public License version 2.0 requirements will be
  ** met: http://www.gnu.org/licenses/gpl-2.0.html.
  **
  ** $QT_END_LICENSE$
  **
  ****************************************************************************/</span>

  import Qt3D.Render 2.0

  <span class="comment">// TODO: Once support for meshes from arrays is implemented, replace ring.obj with that</span>
  <span class="type"><a href="qml-qt3d-render-mesh.html">Mesh</a></span> {
      property <span class="type">real</span> <span class="name">innerRadius</span>
      property <span class="type">real</span> <span class="name">outerRadius</span>
      <span class="comment">/*
      property real ringSegments

      property var vertices: []
      property var faces: []
      property var faceVertexUvs: []
      */</span>

      <span class="name">source</span>: <span class="string">&quot;qrc:/meshes/ring.obj&quot;</span>

      <span class="comment">// Converted from the _RingGeometry() method in the threex.planets.js extension.</span>
      <span class="comment">/*
      function makeRing() {
          innerRadius = innerRadius || 0
          outerRadius = outerRadius || 50
          var thetaSegments = ringSegments || 8
          console.log(innerRadius + &quot;,&quot; + outerRadius + &quot;,&quot; + thetaSegments)

          var normal = Qt.vector3d(0, 0, 1)

          for (var i = 0; i &lt; thetaSegments; i++) {
              var angleLo = (i / thetaSegments) * Math.PI * 2
              var angleHi = ((i + 1) / thetaSegments) * Math.PI * 2

              var vertex1 = Qt.vector3d(innerRadius * Math.cos(angleLo),
                                        innerRadius * Math.sin(angleLo),
                                        0)
              var vertex2 = Qt.vector3d(outerRadius * Math.cos(angleLo),
                                        outerRadius * Math.sin(angleLo),
                                        0)
              var vertex3 = Qt.vector3d(innerRadius * Math.cos(angleHi),
                                        innerRadius * Math.sin(angleHi),
                                        0)
              var vertex4 = Qt.vector3d(outerRadius * Math.cos(angleHi),
                                        outerRadius * Math.sin(angleHi),
                                        0)

              vertices.push(vertex1)
              vertices.push(vertex2)
              vertices.push(vertex3)
              vertices.push(vertex4)

              var vertexIdx = i * 4

              // Create the first triangle
              var face = Qt.vector4d(vertexIdx + 0, vertexIdx + 1, vertexIdx + 2, normal)
              var uvs = []

              var uv = Qt.vector2d(0, 0)
              uvs.push(uv)
              uv = Qt.vector2d(1, 0)
              uvs.push(uv)
              uv = Qt.vector2d(0, 1)
              uvs.push(uv)

              faces.push(face)
              //faceVertexUvs[0].push(uvs)
              faceVertexUvs.push(uvs)

              // Create the second triangle
              face = Qt.vector4d(vertexIdx + 2, vertexIdx + 1, vertexIdx + 3, normal)
              uvs = []

              uv = Qt.vector2d(0, 1)
              uvs.push(uv)
              uv = Qt.vector2d(1, 0)
              uvs.push(uv)
              uv = Qt.vector2d(1, 1)
              uvs.push(uv)

              faces.push(face)
              //faceVertexUvs[0].push(uvs)
              faceVertexUvs.push(uvs)
          }

          computeFaceNormals()
      }

      // Converted from the computeFaceNormals() method in the three.js extension.
      function computeFaceNormals() {
          var cb = Qt.vector3d(0, 0, 0)
          var ab = Qt.vector3d(0, 0, 0)

          for (var f = 0, fl = faces.length; f &lt; fl; f ++) {
              var face = faces[f]

              var vA = vertices[face.x]
              var vB = vertices[face.y]
              var vC = vertices[face.z]

              cb = vC.minus(vB)
              ab = vA.minus(vB)
              cb = cb.crossProduct(ab)

              cb = cb.normalized()

              face.w = cb
          }
      }
      */</span>
  }

</pre>
</div>
<!-- @@@planets-qml/Ring.qml -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2016 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br>    Qt and respective logos are trademarks of The Qt Company Ltd.     in Finland and/or other countries worldwide. All other trademarks are property
   of their respective owners. </p>
</div>
</body>
</html>
